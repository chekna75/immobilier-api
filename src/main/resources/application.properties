# Datasource
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER}
quarkus.datasource.password=${DB_PASS}
quarkus.datasource.jdbc.url=${DB_URL}

# Hibernate / Flyway
quarkus.hibernate-orm.database.generation=none
quarkus.flyway.migrate-at-start=true
quarkus.hibernate-orm.physical-naming-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy
quarkus.hibernate-orm.implicit-naming-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
# Logs SQL désactivés par défaut - activer uniquement en développement si nécessaire
quarkus.hibernate-orm.log.sql=${HIBERNATE_LOG_SQL:false}
quarkus.hibernate-orm.mapping.format.global=ignore

# Désactiver TestContainers pour éviter l'erreur Docker
quarkus.test.containers.enabled=false

# JWT
mp.jwt.verify.publickey.location=publicKey.pem
smallrye.jwt.sign.key.location=privateKey.pem
smallrye.jwt.new-token.lifespan=9000         # 15 min pour Access Token
mp.jwt.verify.issuer=immobilier-ci
mp.jwt.verify.audience=web,mobile

# Refresh tokens (gérés en DB, pas config)

# Mail (désactivé temporairement pour les tests)
# quarkus.mailer.from=${MAIL_FROM:iabychekna75014@gmail.com}
# quarkus.mailer.host=${MAIL_HOST:smtp.gmail.com}
# quarkus.mailer.port=${MAIL_PORT:587}
# quarkus.mailer.username=${MAIL_USERNAME}
# quarkus.mailer.password=${MAIL_PASSWORD}
# quarkus.mailer.start-tls=true


# CORS (adapter aux domaines web et mobile)
quarkus.http.cors.enabled=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PATCH,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=*
quarkus.http.cors.exposed-headers=*
quarkus.http.cors.allow-credentials=true

# Taux OTP (anti-abus)
app.otp.cooldown-seconds=60
app.otp.max-per-day=5

# Fournisseur SMS (ex: Hub2/Infobip/Africa's Talking/Termii) - clé en env
app.sms.provider=hub2
app.sms.apiKey=${SMS_API_KEY}

# Configuration OpenAPI/Swagger (conservé de l'ancienne config)
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui
quarkus.smallrye-openapi.path=/openapi

# Configuration Health Check (conservé de l'ancienne config)
quarkus.smallrye-health.root-path=/health

# Configuration du serveur (conservé de l'ancienne config)
quarkus.http.port=8080
quarkus.http.host=0.0.0.0

# AWS S3 Configuration
aws.s3.region=${AWS_S3_REGION:eu-north-1}
aws.s3.bucket=${AWS_S3_BUCKET:app-immo}
aws.s3.access-key=${AWS_S3_ACCESS_KEY}
aws.s3.secret-key=${AWS_S3_SECRET_KEY}



# Configuration upload photos
app.upload.max-photos-per-listing=5
app.upload.max-file-size-mb=10
app.upload.allowed-formats=jpg,jpeg,png,webp
app.upload.presigned-url-expiration-seconds=3600

# Configuration Jackson pour les dates
quarkus.jackson.write-dates-as-timestamps=false
quarkus.jackson.date-format=yyyy-MM-dd'T'HH:mm:ss.SSS'Z'

# Configuration Firebase pour les notifications push
firebase.service-account-key=${FIREBASE_SERVICE_ACCOUNT_KEY:}
firebase.project-id=${FIREBASE_PROJECT_ID:}

# Configuration des notifications
app.notification.batch-size=500
